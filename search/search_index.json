{"config":{"lang":["es"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Simulaci\u00f3n de Red para Empresa Mediana","text":""},{"location":"#presentacion-del-proyecto","title":"Presentaci\u00f3n del Proyecto","text":"<p>Este es mi proyecto final de Laboratorio Integral de Redes de Datos donde he creado una simulaci\u00f3n completa de red empresarial usando Cisco Packet Tracer.</p> <p>La idea era dise\u00f1ar una red mediana que estuviera bien segmentada y organizada, simulando lo que ser\u00eda una empresa real con diferentes departamentos y necesidades.</p> <p>Datos del Proyecto</p> <p>Autor: Nerea Fdez Fern\u00e1ndez Fecha: 15/01/2026 Herramienta: Cisco Packet Tracer Objetivo: Crear una red segmentada con VLANs, seguridad y monitorizaci\u00f3n</p>"},{"location":"#que-he-hecho-en-este-proyecto","title":"\u00bfQu\u00e9 he hecho en este proyecto?","text":"<p>Se ha montado una red completa con:</p> <ul> <li>11 ordenadores para usuarios</li> <li>3 impresoras de red</li> <li>3 port\u00e1tiles conectados por WiFi</li> <li>1 Access Point para la red inal\u00e1mbrica</li> <li>1 Switch de Capa 3 (el cerebro de la red)</li> <li>1 Router para salida a internet</li> </ul> <p>Todo conectado con cables directos RJ45 y WiFi para los port\u00e1tiles.</p>"},{"location":"#topologia-de-la-red","title":"Topolog\u00eda de la Red","text":"<p>Se ha usado una topolog\u00eda en estrella con el switch de capa 3 en el centro. Esto significa que todos los dispositivos se conectan a un punto central (el switch), lo que hace muy f\u00e1cil gestionar y arreglar problemas.</p> <pre><code>graph TD\n    subgraph Internet[\"Internet\"]\n        WAN[Conexi\u00f3n WAN]\n    end\n\n    subgraph Core[\"Switch Capa 3 Central\"]\n        SW[Switch Principal&lt;br/&gt;Enrutamiento entre VLANs]\n    end\n\n    subgraph VLAN10[\"VLAN 10 - Ordenadores\"]\n        PC[11 PCs&lt;br/&gt;192.168.10.10-20]\n    end\n\n    subgraph VLAN20[\"VLAN 20 - Impresoras\"]\n        PR[3 Impresoras&lt;br/&gt;192.168.20.10-12]\n    end\n\n    subgraph VLAN30[\"VLAN 30 - WiFi\"]\n        AP[Access Point&lt;br/&gt;SSID: wifi]\n        LAP[3 Port\u00e1tiles&lt;br/&gt;192.168.30.10-12]\n    end\n\n    subgraph VLAN40[\"VLAN 40 - Router\"]\n        R[Router&lt;br/&gt;192.168.40.10]\n    end\n\n    WAN --&gt; R\n    R --&gt; SW\n    SW --&gt; VLAN10\n    SW --&gt; VLAN20\n    SW --&gt; AP\n    AP -.WiFi.-&gt; LAP\n\n    style SW fill:#4a90e2,color:#fff\n    style VLAN10 fill:#d5f4e6\n    style VLAN20 fill:#fdeaa8\n    style VLAN30 fill:#d6eaf8\n    style VLAN40 fill:#fadbd8</code></pre> <p>Vista de la Topolog\u00eda:</p> <p></p>"},{"location":"#division-en-vlans","title":"Divisi\u00f3n en VLANs","text":"<p>Para organizar mejor la red, he dividido todo en 4 VLANs (redes virtuales):</p> VLAN Nombre Para qu\u00e9 sirve Red VLAN 10 Ordenadores Los PCs de los trabajadores 192.168.10.0/24 VLAN 20 Impresoras Las impresoras de red 192.168.20.0/24 VLAN 30 Punto Acceso Port\u00e1tiles conectados por WiFi 192.168.30.0/24 VLAN 40 Router Conexi\u00f3n al router de salida 192.168.40.0/24 <p></p> <p>\u00bfPor qu\u00e9 usar VLANs?</p> <p>Separar la red en VLANs me permite:</p> <ul> <li>Tener m\u00e1s seguridad (los invitados WiFi no pueden acceder a todo)</li> <li>Mejor rendimiento (menos tr\u00e1fico innecesario)</li> <li>M\u00e1s f\u00e1cil de gestionar y arreglar problemas</li> </ul>"},{"location":"#dispositivos-y-conexiones","title":"Dispositivos y Conexiones","text":""},{"location":"#equipos-que-he-usado","title":"Equipos que he usado:","text":"VLAN 10 - PCsVLAN 20 - ImpresorasVLAN 30 - WiFiVLAN 40 - Router <p>11 ordenadores para los trabajadores</p> <ul> <li>IPs: desde 192.168.10.10 hasta 192.168.10.20</li> <li>Gateway: 192.168.10.1</li> <li>M\u00e1scara: 255.255.255.0</li> <li>Puertos del switch: FastEthernet 0/1 - 0/11</li> </ul> <p>3 impresoras de red</p> <ul> <li>IP fijas: 192.168.20.10, .11 y .12</li> <li>Gateway: 192.168.20.1</li> <li>M\u00e1scara: 255.255.255.0</li> <li>Puertos del switch: FastEthernet 0/12 - 0/14</li> </ul> <p>1 Access Point + 3 Port\u00e1tiles</p> <ul> <li>Access Point: Puerto Fa0/15 del switch</li> <li>SSID: wifi</li> <li>Seguridad: WPA2-PSK</li> <li>Password: prueba1234</li> <li>Port\u00e1tiles: IPs 192.168.30.10, .11 y .12</li> <li>Gateway: 192.168.30.1</li> </ul> <p>1 Router para internet</p> <ul> <li>IP del router: 192.168.40.10</li> <li>IP del switch: 192.168.40.1</li> <li>Puerto: GigabitEthernet 0/1</li> </ul>"},{"location":"#caracteristicas-principales","title":"Caracter\u00edsticas Principales","text":"<p>Se ha implementado varias cosas importantes para que la red funcione bien:</p>"},{"location":"#enrutamiento-entre-vlans","title":"Enrutamiento entre VLANs","text":"<p>El switch de capa 3 permite que las diferentes VLANs se comuniquen entre s\u00ed (cuando est\u00e1 permitido).</p>"},{"location":"#seguridad-con-acls","title":"Seguridad con ACLs","text":"<p>Se ha puesto listas de control de acceso (ACLs) para que:</p> <ul> <li>\u274c Los port\u00e1tiles WiFi NO puedan acceder a los PCs (VLAN 10)</li> <li>\u274c Los port\u00e1tiles WiFi NO puedan acceder a las impresoras (VLAN 20)</li> <li>\u2705 Pero S\u00cd puedan salir a internet</li> </ul> <p>Esto est\u00e1 por seguridad, ya que el WiFi podr\u00eda ser usado por alguien externo (invitado)</p>"},{"location":"#seguridad-de-puertos","title":"Seguridad de Puertos","text":"<p>Se ha configurado que solo un n\u00famero limitado de dispositivos puedan conectarse a cada puerto del switch.</p>"},{"location":"#spanning-tree-protocol-stp","title":"Spanning Tree Protocol (STP)","text":"<p>Se ha configurado para evitar bucles en la red y que funcione todo correctamente.</p>"},{"location":"#monitorizacion-snmp","title":"Monitorizaci\u00f3n SNMP","text":"<p>Se ha activado SNMP en el router para poder monitorizar el estado de la red (ver si est\u00e1 encendido, cu\u00e1nto tiempo lleva funcionando, etc.).</p>"},{"location":"#navegacion-de-la-documentacion","title":"Navegaci\u00f3n de la Documentaci\u00f3n","text":"<p>En las siguientes p\u00e1ginas explico todo el proceso paso a paso:</p> <ul> <li>Configuraci\u00f3n de Red - C\u00f3mo configurar las VLANs, IPs y dispositivos</li> <li>Seguridad y ACLs - Las medidas de seguridad a implementar</li> <li>Pruebas y Monitorizaci\u00f3n - C\u00f3mo comprobar que todo funciona</li> <li>Conclusiones - Lo que aprend\u00ed y posibles mejoras</li> </ul> <p>Mi Experiencia</p> <p>Este proyecto me ha servido para entender c\u00f3mo se monta una red real de empresa. Hay que entender como funcionan las VLANs y las ACLs, pero una vez lo entiendes, es f\u00e1cil de trabajar. Lo m\u00e1s complicado fue hacer que el WiFi funcionara con las ACLs correctamente configuradas.</p> <p>\u00a1Como se mont\u00f3 todo! \ud83d\udc47</p>"},{"location":"conclusiones/","title":"Conclusiones","text":"<p>Despu\u00e9s de completar este proyecto, entender el como usar redes y configurarlas, se hizo mucho m\u00e1s f\u00e1cil. Aqu\u00ed resumo lo que he conseguido y qu\u00e9 podr\u00eda mejorar en el futuro.</p>"},{"location":"conclusiones/#resumen-del-proyecto","title":"Resumen del Proyecto","text":"<p>He dise\u00f1ado y configurado una red empresarial completa en Cisco Packet Tracer con:</p> <ul> <li>Segmentaci\u00f3n en 4 VLANs (Ordenadores, Impresoras, AP, Router)</li> <li>19 dispositivos funcionando: 11 PCs, 3 impresoras, 3 port\u00e1tiles, 1 AP, 1 router, 1 switch</li> <li>Enrutamiento Inter-VLAN con switch de capa 3</li> <li>Seguridad mediante ACLs para proteger recursos internos</li> <li>Red WiFi segura con WPA2-PSK</li> <li>Monitorizaci\u00f3n SNMP del router</li> <li>Spanning Tree Protocol para evitar bucles</li> <li>Port-security en los puertos cr\u00edticos</li> </ul>"},{"location":"conclusiones/#que-se-ha-aprendido","title":"\u00bfQu\u00e9 se ha aprendido?","text":""},{"location":"conclusiones/#sobre-las-vlans","title":"Sobre las VLANs","text":"<p>Entender su uso y su importancia. Pensaba que era m\u00e1s f\u00e1cil tener todo en la misma red. Pero ahora veo que:</p> <ul> <li>Las VLANs organizan mejor la red - Es mucho m\u00e1s f\u00e1cil gestionar 4 redes peque\u00f1as que una grande</li> <li>Mejoran la seguridad - Puedes controlar qui\u00e9n accede a qu\u00e9</li> <li>Mejoran el rendimiento - Menos tr\u00e1fico de broadcast innecesario</li> </ul> <p>Mi experiencia</p> <p>A la hora de crear las Vlans, el trabajo de configurar todas las ACL, y procedimientos, se me hizo mas \u00e1gil y f\u00e1cil.</p>"},{"location":"conclusiones/#sobre-el-enrutamiento-inter-vlan","title":"Sobre el Enrutamiento Inter-VLAN","text":"<p>Configurar el switch de capa 3 para que las VLANs pudieran comunicarse fue complicado al principio. Los puntos clave que aprend\u00ed:</p> <ol> <li>Hay que activar <code>ip routing</code> - Sin esto el switch no enruta nada</li> <li>Las interfaces SVI son los gateways - Cada VLAN necesita su gateway (.1 en mi caso)</li> <li>Los dispositivos deben saber su gateway - Si no se configuran bien, no funciona</li> </ol>"},{"location":"conclusiones/#sobre-las-acls","title":"Sobre las ACLs","text":"<p>A la hora de crear las \"Listas de Control de Acceso\" (ACLs), hay que tener muchos pasos en cuenta:</p> <ul> <li>Problemas que tuve:</li> <li>Me olvid\u00e9 de poner <code>permit ip any any</code> \u2192 Todo se bloqueaba</li> <li> <p>Puse la ACL en direcci\u00f3n \"out\" en vez de \"in\" \u2192 No funcionaba</p> </li> <li> <p>Lo que aprend\u00ed:</p> </li> <li>Las ACLs se leen de arriba hacia abajo</li> <li>El orden de las reglas importa mucho</li> <li>Hay que aplicarlas en la interfaz correcta y direcci\u00f3n correcta</li> </ul> <p>Error com\u00fan</p> <p>Si te olvidas de poner <code>access-list 100 permit ip any any</code> al final, toda la comunicaci\u00f3n que NO has bloqueado expl\u00edcitamente tambi\u00e9n se bloquear\u00e1. Esto me pas\u00f3 y tard\u00e9 un rato en darme cuenta.</p>"},{"location":"conclusiones/#sobre-snmp","title":"Sobre SNMP","text":"<p>SNMP fue interesante porque permite ver informaci\u00f3n del router desde otro dispositivo. En una red real esto ser\u00eda muy \u00fatil para:</p> <ul> <li>Saber si los dispositivos est\u00e1n encendidos</li> <li>Ver cu\u00e1nto tiempo llevan funcionando</li> <li>Detectar problemas antes de que fallen</li> </ul>"},{"location":"conclusiones/#sobre-packet-tracer","title":"Sobre Packet Tracer","text":"<p>Trabajar con Packet Tracer me ha gustado, pero tambi\u00e9n he visto sus limitaciones:</p> <p>Bueno: </p> <ul> <li>Es muy visual y f\u00e1cil de entender</li> <li>Te deja practicar los comandos CLI de Cisco</li> </ul> <p>Malo: </p> <ul> <li>A veces se bugea y hay que reiniciar</li> <li>No tiene todas las funciones de un router/switch real</li> </ul>"},{"location":"conclusiones/#ventajas-de-este-diseno","title":"Ventajas de Este Dise\u00f1o","text":"<p>Que ventajas tiene esta red:</p>"},{"location":"conclusiones/#seguridad","title":"Seguridad","text":"<ul> <li>Las ACLs protegen los recursos internos (PCs e impresoras) del WiFi</li> <li>Port-security evita que conecten dispositivos no autorizados</li> <li>WiFi con WPA2-PSK (no est\u00e1 abierto)</li> <li>Cada departamento en su propia VLAN</li> </ul>"},{"location":"conclusiones/#rendimiento","title":"Rendimiento","text":"<ul> <li>Las VLANs reducen el tr\u00e1fico de broadcast</li> <li>El switch de capa 3 enruta m\u00e1s r\u00e1pido que un router</li> <li>STP evita bucles que saturar\u00edan la red</li> </ul>"},{"location":"conclusiones/#gestion","title":"Gesti\u00f3n","text":"<ul> <li>Todo centralizado en un switch de capa 3</li> <li>F\u00e1cil de expandir (solo a\u00f1ades m\u00e1s puertos/VLANs)</li> <li>SNMP permite monitorizaci\u00f3n remota</li> <li>Los comandos show permiten ver el estado en tiempo real</li> </ul>"},{"location":"conclusiones/#escalabilidad","title":"Escalabilidad","text":"<p>Si la empresa crece, puedo:</p> <ul> <li>A\u00f1adir m\u00e1s PCs/impresoras sin cambiar nada</li> <li>Crear nuevas VLANs f\u00e1cilmente</li> <li>Conectar m\u00e1s switches si hace falta</li> <li>Ampliar el direccionamiento IP</li> </ul>"},{"location":"conclusiones/#posibles-mejoras-futuras","title":"Posibles Mejoras Futuras","text":"<p>Que se podr\u00eda mejorar a futuro:</p>"},{"location":"conclusiones/#1-anadir-switches-de-capa-2","title":"1. A\u00f1adir Switches de Capa 2","text":"<p>Mejora Principal</p> <p>Problema: Ahora todos los dispositivos est\u00e1n conectados directamente al switch de capa 3, lo que satura sus puertos.</p> <p>Soluci\u00f3n: A\u00f1adir switches de capa 2 en cada planta/departamento:</p> <ul> <li>Un switch L2 para los PCs (VLAN 10)</li> <li>Otro switch L2 para las impresoras (VLAN 20)</li> <li>Conectar estos switches al switch L3 central con puertos trunk</li> </ul> <p>Ventaja: El switch L3 solo se usa para enrutamiento, no para conectar dispositivos finales.</p>"},{"location":"conclusiones/#2-dhcp-en-el-switch","title":"2. DHCP en el Switch","text":"<p>Ahora todas las IPs son est\u00e1ticas (las configur\u00e9 a mano). Podr\u00eda configurar un servidor DHCP en el switch para que asigne IPs autom\u00e1ticamente.</p> <p>Ventajas:</p> <ul> <li>Menos trabajo manual al conectar nuevos dispositivos</li> <li>Menos errores (no hay que acordarse de qu\u00e9 IPs est\u00e1n libres)</li> <li>Gesti\u00f3n centralizada</li> </ul>"},{"location":"conclusiones/#3-mejorar-snmp-a-snmpv3","title":"3. Mejorar SNMP a SNMPv3","text":"<p>SNMPv2c que us\u00e9 no es muy seguro (las passwords van sin cifrar). SNMPv3 ser\u00eda mejor porque:</p> <ul> <li>Cifra los datos</li> <li>Autenticaci\u00f3n m\u00e1s segura</li> <li>Control de acceso m\u00e1s fino</li> </ul>"},{"location":"conclusiones/#4-mas-servicios","title":"4. M\u00e1s Servicios","text":"<p>Podr\u00eda a\u00f1adir:</p> <ul> <li>Servidor DNS interno</li> <li>VLANs adicionales (gesti\u00f3n, VoIP para tel\u00e9fonos IP)</li> <li>Firewall entre el router y internet</li> </ul>"},{"location":"conclusiones/#5-port-security-en-todos-los-puertos","title":"5. Port-Security en Todos los Puertos","text":"<p>Ahora solo la configur\u00e9 en algunos puertos de ejemplo. Deber\u00eda ponerla en todos los puertos de acceso para m\u00e1xima seguridad.</p>"},{"location":"conclusiones/#valoracion-final","title":"Valoraci\u00f3n Final","text":"<p>Este dise\u00f1o permite gestionar toda la red de manera eficiente, segura y con capacidad de crecimiento.</p> <p>Los dispositivos est\u00e1n divididos en segmentos usando VLANs, lo que facilita su administraci\u00f3n y ayuda a mantener la infraestructura m\u00e1s segura.</p> <p>Adem\u00e1s, la configuraci\u00f3n hecha ahora permite ampliar la red en el futuro sin tener que hacer cambios complicados en la estructura existente.</p> <p>Objetivo cumplido</p> <p>se ha conseguido crear una red empresarial funcional, segura y bien documentada. Aunque hay cosas que mejorar (como a\u00f1adir switches L2 y redundancia), el proyecto cumple su objetivo y funciona correctamente.</p>"},{"location":"conclusiones/#capturas-finales","title":"Capturas Finales","text":"<p>Aqu\u00ed algunas capturas de pantalla del proyecto funcionando:</p> <p></p> <p></p> <p></p> <p>Gracias por leer mi documentaci\u00f3n. Espero que le haya gustado!!!. </p> <p>Proyecto realizado por: Nerea Fdez Fern\u00e1ndez Asignatura: Laboratorio Integral de Redes de Datos Fecha: Junio 2025 Herramienta: Cisco Packet Tracer</p>"},{"location":"configuracion/","title":"Configuraci\u00f3n de la Red","text":"<p>En esta p\u00e1gina explico paso a paso c\u00f3mo se configura toda la red en Packet Tracer.</p>"},{"location":"configuracion/#creacion-de-las-vlans","title":"Creaci\u00f3n de las VLANs","text":"<p>Lo primero que se realiza son las 4 VLANs en el switch de capa 3. Las VLANs sirven para segmentar la red, es decir, dividirla en partes m\u00e1s peque\u00f1as y organizadas.</p> <pre><code>Switch&gt; enable\nSwitch# configure terminal\nSwitch(config)# hostname SwitchCapa3\n\n! VLAN 10 para los ordenadores\nSwitchCapa3(config)# vlan 10\nSwitchCapa3(config-vlan)# name Ordenadores\nSwitchCapa3(config-vlan)# exit\n\n! VLAN 20 para las impresoras\nSwitchCapa3(config)# vlan 20\nSwitchCapa3(config-vlan)# name Impresoras\nSwitchCapa3(config-vlan)# exit\n\n! VLAN 30 para el WiFi\nSwitchCapa3(config)# vlan 30\nSwitchCapa3(config-vlan)# name WiFi\nSwitchCapa3(config-vlan)# exit\n\n! VLAN 40 para el router\nSwitchCapa3(config)# vlan 40\nSwitchCapa3(config-vlan)# name Router\nSwitchCapa3(config-vlan)# exit\n</code></pre> <p>Nota</p> <p>Todo esto se realiza desde la consola CLI del switch en Packet Tracer. Ponemos la vlan que queremos crear, y le daremos un nombre.</p>"},{"location":"configuracion/#asignacion-de-ips-a-las-vlans","title":"Asignaci\u00f3n de IPs a las VLANs","text":"<p>Una vez creadas las VLANs, hay que asignarles direcciones IP. Esto se hace creando interfaces virtuales (SVI) que act\u00faan como \"gateways\" o puertas de enlace para cada VLAN.</p> <pre><code>! Primero hay que activar el enrutamiento IP\nSwitchCapa3(config)# ip routing\n\n! Gateway para VLAN 10 (Ordenadores)\nSwitchCapa3(config)# interface vlan 10\nSwitchCapa3(config-if)# ip address 192.168.10.1 255.255.255.0\nSwitchCapa3(config-if)# no shutdown\nSwitchCapa3(config-if)# exit\n\n! Gateway para VLAN 20 (Impresoras)\nSwitchCapa3(config)# interface vlan 20\nSwitchCapa3(config-if)# ip address 192.168.20.1 255.255.255.0\nSwitchCapa3(config-if)# no shutdown\nSwitchCapa3(config-if)# exit\n\n! Gateway para VLAN 30 (WiFi)\nSwitchCapa3(config)# interface vlan 30\nSwitchCapa3(config-if)# ip address 192.168.30.1 255.255.255.0\nSwitchCapa3(config-if)# no shutdown\nSwitchCapa3(config-if)# exit\n\n! Gateway para VLAN 40 (Router)\nSwitchCapa3(config)# interface vlan 40\nSwitchCapa3(config-if)# ip address 192.168.40.1 255.255.255.0\nSwitchCapa3(config-if)# no shutdown\nSwitchCapa3(config-if)# exit\n</code></pre> <p>Comandos b\u00e1sicos</p> <p><code>interface vlan 40</code> selecciona la VLAN, <code>ip address</code> asigna la IP, <code>no shutdown</code> la activa, y <code>exit</code> sale.</p>"},{"location":"configuracion/#configuracion-de-los-puertos-del-switch","title":"Configuraci\u00f3n de los Puertos del Switch","text":"<p>Ahora toca asignar cada puerto f\u00edsico del switch a su VLAN correspondiente. Para saber qu\u00e9 puertos usar, en Packet Tracer dejando el rat\u00f3n encima del switch, sale una lista con todos los puertos ocupados. (cuadro descriptivo).</p>"},{"location":"configuracion/#puertos-para-los-pcs-vlan-10","title":"Puertos para los PCs (VLAN 10)","text":"<p>Los 11 PCs est\u00e1n conectados desde el puerto Fa0/1 hasta el Fa0/11:</p> <pre><code>SwitchCapa3(config)# interface range fastEthernet 0/1-11\nSwitchCapa3(config-if-range)# switchport mode access\nSwitchCapa3(config-if-range)# switchport access vlan 10\nSwitchCapa3(config-if-range)# no shutdown\nSwitchCapa3(config-if-range)# exit\n</code></pre>"},{"location":"configuracion/#puertos-para-las-impresoras-vlan-20","title":"Puertos para las Impresoras (VLAN 20)","text":"<p>Las 3 impresoras est\u00e1n en los puertos Fa0/12, Fa0/13 y Fa0/14:</p> <pre><code>SwitchCapa3(config)# interface range fastEthernet 0/12-14\nSwitchCapa3(config-if-range)# switchport mode access\nSwitchCapa3(config-if-range)# switchport access vlan 20\nSwitchCapa3(config-if-range)# no shutdown\nSwitchCapa3(config-if-range)# exit\n</code></pre>"},{"location":"configuracion/#puerto-para-el-access-point-vlan-30","title":"Puerto para el Access Point (VLAN 30)","text":"<p>El AP est\u00e1 conectado al puerto Fa0/15:</p> <pre><code>SwitchCapa3(config)# interface fastEthernet 0/15\nSwitchCapa3(config-if)# switchport mode access\nSwitchCapa3(config-if)# switchport access vlan 30\nSwitchCapa3(config-if)# no shutdown\nSwitchCapa3(config-if)# exit\n</code></pre>"},{"location":"configuracion/#puerto-para-el-router-vlan-40","title":"Puerto para el Router (VLAN 40)","text":"<p>El router est\u00e1 en el puerto GigabitEthernet 0/1:</p> <pre><code>SwitchCapa3(config)# interface gigabitEthernet 0/1\nSwitchCapa3(config-if)# switchport mode access\nSwitchCapa3(config-if)# switchport access vlan 40\nSwitchCapa3(config-if)# no shutdown\nSwitchCapa3(config-if)# exit\n</code></pre> <p>Configuraci\u00f3n de puerto</p> <p>Se selecciona el puerto con <code>interface</code>, se pone en modo <code>access</code>, se asigna a la VLAN 30, se activa con <code>no shutdown</code> y se sale.</p>"},{"location":"configuracion/#configuracion-del-router","title":"Configuraci\u00f3n del Router","text":"<p>El router lo configur\u00e9 con la IP 192.168.40.10 en la interfaz que va conectada al switch:</p> <pre><code>Router&gt; enable\nRouter# configure terminal\nRouter(config)# hostname RouterPrincipal\n\nRouterPrincipal(config)# interface gigabitEthernet 0/1\nRouterPrincipal(config-if)# ip address 192.168.40.10 255.255.255.0\nRouterPrincipal(config-if)# no shutdown\nRouterPrincipal(config-if)# exit\n\n! Ruta para que el router sepa d\u00f3nde est\u00e1n las dem\u00e1s redes\nRouterPrincipal(config)# ip route 192.168.0.0 255.255.0.0 192.168.40.1\nRouterPrincipal(config)# exit\nRouterPrincipal# write memory\n</code></pre> <p>Esta ruta hace que el router sepa que todas las redes 192.168.x.x est\u00e1n detr\u00e1s del switch (192.168.40.1).</p>"},{"location":"configuracion/#configuracion-de-los-pcs","title":"Configuraci\u00f3n de los PCs","text":"<p>Todos los PCs se configuraron con IP est\u00e1tica (fija). Aqu\u00ed un ejemplo con el PC0:</p> <ul> <li>IP: 192.168.10.10</li> <li>M\u00e1scara: 255.255.255.0</li> <li>Gateway: 192.168.10.1</li> </ul> <p>Y as\u00ed sucesivamente hasta el PC10 con la IP 192.168.10.20.</p> <p></p> <p>IPs de los PCs</p> <ul> <li>PC0: 192.168.10.10</li> <li>PC1: 192.168.10.11</li> <li>PC2: 192.168.10.12</li> <li>...</li> <li>PC10: 192.168.10.20</li> </ul>"},{"location":"configuracion/#configuracion-de-las-impresoras","title":"Configuraci\u00f3n de las Impresoras","text":"<p>Las impresoras tambi\u00e9n tienen IP fija:</p> Impresora IP Gateway M\u00e1scara Impresora 0 192.168.20.10 192.168.20.1 255.255.255.0 Impresora 1 192.168.20.11 192.168.20.1 255.255.255.0 Impresora 2 192.168.20.12 192.168.20.1 255.255.255.0 <p>Esto es importante porque as\u00ed los PCs pueden encontrar las impresoras siempre en la misma direcci\u00f3n.</p>"},{"location":"configuracion/#configuracion-del-access-point","title":"Configuraci\u00f3n del Access Point","text":"<p>El AP se configura desde la pesta\u00f1a Config del AP en Packet Tracer:</p> <p>En el Puerto 1: - SSID: wifi - Tipo de seguridad: WPA2-PSK - Contrase\u00f1a: prueba1234</p> <p></p>"},{"location":"configuracion/#configuracion-de-los-portatiles","title":"Configuraci\u00f3n de los Port\u00e1tiles","text":"<p>Los port\u00e1tiles primero hay que conectarlos al WiFi y luego asignarles IP est\u00e1tica:</p>"},{"location":"configuracion/#paso-1-conectar-al-wifi","title":"Paso 1: Conectar al WiFi","text":"<ol> <li>En el port\u00e1til, ir a Desktop \u2192 PC Wireless</li> <li>Darle a Refresh \u2192 aparece el SSID \"wifi\"</li> <li>Conectar e introducir la contrase\u00f1a: prueba1234</li> </ol>"},{"location":"configuracion/#paso-2-configurar-la-ip","title":"Paso 2: Configurar la IP","text":"<p>En la pesta\u00f1a Config \u2192 Interface Wireless0:</p> Port\u00e1til IP Gateway M\u00e1scara Laptop 0 192.168.30.10 192.168.30.1 255.255.255.0 Laptop 1 192.168.30.11 192.168.30.1 255.255.255.0 Laptop 2 192.168.30.12 192.168.30.1 255.255.255.0 <p>Importante</p> <p>Primero hay que conectar al WiFi y luego configurar la IP. Si lo haces al rev\u00e9s no funciona.</p>"},{"location":"configuracion/#tabla-resumen-de-direccionamiento","title":"Tabla Resumen de Direccionamiento","text":"<p>Es importante tener una tabla de IPs de esta manera llevar un mantenimiento ser\u00e1 mas sencillo:</p> Dispositivo VLAN IP M\u00e1scara Gateway Puertos Switch PCs (11) 10 192.168.10.10-20 255.255.255.0 192.168.10.1 Fa0/1 - Fa0/11 Impresoras (3) 20 192.168.20.10-12 255.255.255.0 192.168.20.1 Fa0/12 - Fa0/14 Port\u00e1tiles (3) 30 192.168.30.10-12 255.255.255.0 192.168.30.1 (WiFi) Access Point 30 - - - Fa0/15 Router 40 192.168.40.10 255.255.255.0 192.168.40.1 Gi0/1 Switch (SVI) - 192.168.x.1 255.255.255.0 - -"},{"location":"configuracion/#verificacion-basica","title":"Verificaci\u00f3n B\u00e1sica","text":"<p>Para comprobar que todo esta bien configurado, se usar\u00e1 estos comandos:</p>"},{"location":"configuracion/#ver-las-vlans-creadas","title":"Ver las VLANs creadas","text":"<pre><code>SwitchCapa3# show vlan brief\n</code></pre> <p>Este comando permite mostrar todas las VLANs y puertos que est\u00e9n asignados.</p>"},{"location":"configuracion/#ver-las-ips-del-switch","title":"Ver las IPs del switch","text":"<pre><code>SwitchCapa3# show ip interface brief\n</code></pre> <p>Con este comando se puede ver que las interfaces VLAN 10, 20, 30 y 40 estaban \"up\" (funcionando).</p> <p>\u00a1Configuraci\u00f3n completada!</p> <p>Con esto ya tendr\u00edamos toda la red montada. Lo siguiente ser\u00e1 configurar la seguridad y hacer pruebas para ver que todo funcione correctamente.</p> <p>Siguiente: Seguridad y ACLs \u2192</p>"},{"location":"pruebas/","title":"Pruebas y Monitorizaci\u00f3n","text":"<p>Una vez que est\u00e9 todo configurado, el siguiente paso ser\u00e1 hacer pruebas para comprobar que la red funciona correctamente y que las ACLs bloqueaban lo que ten\u00edan que bloquear.</p>"},{"location":"pruebas/#pruebas-de-conectividad-con-ping","title":"Pruebas de Conectividad con Ping","text":"<p>El comando m\u00e1s \u00fatil para probar redes es <code>ping</code>. Se usar\u00e1 desde los diferentes dispositivos para ver si pueden comunicarse.</p>"},{"location":"pruebas/#pruebas-exitosas","title":"Pruebas Exitosas \u2705","text":"<p>Primero comprobaremos que es lo que S\u00cd deber\u00eda funcionar:</p> PC a PC (misma VLAN)PC a Impresora (diferente VLAN)PC a Router <p>Desde PC0 (192.168.10.10) hice ping a PC1 (192.168.10.11):</p> <pre><code>C:\\&gt; ping 192.168.10.11\n\nReply from 192.168.10.11: bytes=32 time&lt;1ms TTL=128\nReply from 192.168.10.11: bytes=32 time&lt;1ms TTL=128\nReply from 192.168.10.11: bytes=32 time&lt;1ms TTL=128\nReply from 192.168.10.11: bytes=32 time&lt;1ms TTL=128\n\nPing statistics: Sent = 4, Received = 4, Lost = 0 (0% loss)\n</code></pre> <p>Funciona perfecto - Los PCs de la misma VLAN se comunican sin problemas.</p> <p></p> <p>Desde PC0 (192.168.10.10) hice ping a Impresora0 (192.168.20.10):</p> <pre><code>C:\\&gt; ping 192.168.20.10\n\nReply from 192.168.20.10: bytes=32 time=1ms TTL=127\nReply from 192.168.20.10: bytes=32 time&lt;1ms TTL=127\nReply from 192.168.20.10: bytes=32 time&lt;1ms TTL=127\nReply from 192.168.20.10: bytes=32 time=1ms TTL=127\n\nPing statistics: Sent = 4, Received = 4, Lost = 0 (0% loss)\n</code></pre> <p>Funciona - El enrutamiento entre VLANs est\u00e1 bien configurado. El TTL=127 indica que pas\u00f3 por el switch (1 salto).</p> <p></p> <p>Desde PC0 (192.168.10.10) hice ping al Router (192.168.40.10):</p> <pre><code>C:\\&gt; ping 192.168.40.10\n\nReply from 192.168.40.10: bytes=32 time=1ms TTL=254\nReply from 192.168.40.10: bytes=32 time=1ms TTL=254\nReply from 192.168.40.10: bytes=32 time&lt;1ms TTL=254\nReply from 192.168.40.10: bytes=32 time=1ms TTL=254\n\nPing statistics: Sent = 4, Received = 4, Lost = 0 (0% loss)\n</code></pre> <p>Funciona - Todos pueden acceder al router.</p> <p></p>"},{"location":"pruebas/#pruebas-con-acl-bloqueadas","title":"Pruebas con ACL (Bloqueadas)","text":"<p>Ahora viene lo importante: comprobar que las ACLs S\u00cd est\u00e1n bloqueando lo que no deber\u00eda pasar.</p> Port\u00e1til WiFi \u2192 PC (BLOQUEADO)Port\u00e1til WiFi \u2192 Impresora (BLOQUEADO)Port\u00e1til WiFi \u2192 Router (PERMITIDO) <p>Desde Laptop0 (192.168.30.10) intent\u00e9 hacer ping a PC0 (192.168.10.10):</p> <pre><code>C:\\&gt; ping 192.168.10.10\n\nRequest timed out.\nRequest timed out.\nRequest timed out.\nRequest timed out.\n\nPing statistics: Sent = 4, Received = 0, Lost = 4 (100% loss)\n</code></pre> <p>BLOQUEADO - \u00a1Perfecto! La ACL est\u00e1 funcionando. El port\u00e1til WiFi NO puede acceder a los PCs.</p> <p>Desde Laptop0 (192.168.30.10) intent\u00e9 hacer ping a Impresora0 (192.168.20.10):</p> <pre><code>C:\\&gt; ping 192.168.20.10\n\nRequest timed out.\nRequest timed out.\nRequest timed out.\nRequest timed out.\n\nPing statistics: Sent = 4, Received = 0, Lost = 4 (100% loss)\n</code></pre> <p>BLOQUEADO - Tambi\u00e9n funciona. El WiFi no puede acceder a las impresoras.</p> <p>Desde Laptop0 (192.168.30.10) hice ping al Router (192.168.40.10):</p> <pre><code>C:\\&gt; ping 192.168.40.10\n\nReply from 192.168.40.10: bytes=32 time=2ms TTL=254\nReply from 192.168.40.10: bytes=32 time=1ms TTL=254\nReply from 192.168.40.10: bytes=32 time=1ms TTL=254\nReply from 192.168.40.10: bytes=32 time=2ms TTL=254\n\nPing statistics: Sent = 4, Received = 4, Lost = 0 (0% loss)\n</code></pre> <p>Funciona - El WiFi S\u00cd puede acceder al router (y por tanto a internet). Esto es lo que quer\u00eda.</p>"},{"location":"pruebas/#tabla-resumen-de-pruebas","title":"Tabla Resumen de Pruebas","text":"Origen Destino IP Destino Resultado Motivo PC0 PC1 192.168.10.11 \u2705 Funciona Misma VLAN PC0 Impresora0 192.168.20.10 \u2705 Funciona Enrutamiento Inter-VLAN PC0 Router 192.168.40.10 \u2705 Funciona Sin restricciones Laptop0 PC0 192.168.10.10 \u274c Bloqueado ACL 100 deny Laptop0 Impresora0 192.168.20.10 \u274c Bloqueado ACL 100 deny Laptop0 Router 192.168.40.10 \u2705 Funciona ACL permite <p>\u00a1Todo funciona como esperaba!</p> <p>Las ACLs est\u00e1n haciendo su trabajo correctamente. Los port\u00e1tiles WiFi no pueden acceder a recursos internos, pero s\u00ed al router.</p>"},{"location":"pruebas/#pruebas-bidireccionales","title":"Pruebas Bidireccionales","text":"<p>Tambi\u00e9n hay que comprobar que los PCs S\u00cd pueden hacer ping a los port\u00e1tiles. La ACL solo bloquea en una direcci\u00f3n (desde VLAN 30 hacia fuera):</p> <p>Desde PC0 (192.168.10.10) a Laptop0 (192.168.30.10):</p> <pre><code>C:\\&gt; ping 192.168.30.10\n\nReply from 192.168.30.10: bytes=32 time=2ms TTL=127\nReply from 192.168.30.10: bytes=32 time=1ms TTL=127\nReply from 192.168.30.10: bytes=32 time=2ms TTL=127\nReply from 192.168.30.10: bytes=32 time=1ms TTL=127\n\nPing statistics: Sent = 4, Received = 4, Lost = 0 (0% loss)\n</code></pre> <p>Funciona. Esto es \u00fatil porque los administradores (desde los PCs) s\u00ed pueden gestionar los dispositivos WiFi si hace falta.</p>"},{"location":"pruebas/#monitorizacion-con-snmp","title":"Monitorizaci\u00f3n con SNMP","text":"<p>Para poder supervisar el estado de la red, se deber\u00e1 configurar SNMP en el router. SNMP permite ver informaci\u00f3n como:</p> <ul> <li>Tiempo que lleva encendido el router</li> <li>Nombre del dispositivo</li> <li>Configuraci\u00f3n actual</li> <li>Estados de las interfaces</li> </ul>"},{"location":"pruebas/#configuracion-de-snmp-en-el-router","title":"Configuraci\u00f3n de SNMP en el Router","text":"<pre><code>RouterPrincipal&gt; enable\nRouterPrincipal# configure terminal\n\n! Configurar informaci\u00f3n de contacto\nRouterPrincipal(config)# snmp-server contact Nerea Fernandez\nRouterPrincipal(config)# snmp-server location Sala Servidores\n\n! Configurar \"community strings\" (como passwords)\nRouterPrincipal(config)# snmp-server community read RO\nRouterPrincipal(config)# snmp-server community write RW\n\n! Activar el servidor SNMP\nRouterPrincipal(config)# snmp-server enable traps\n\nRouterPrincipal(config)# exit\nRouterPrincipal# write memory\n</code></pre> <p>Community Strings</p> <ul> <li>read (RO) = Read Only (solo lectura) - Para consultar informaci\u00f3n</li> <li>write (RW) = Read-Write (lectura y escritura) - Para hacer cambios remotos</li> </ul>"},{"location":"pruebas/#probando-snmp-desde-un-pc","title":"Probando SNMP desde un PC","text":"<p>Para probar SNMP, desde PC0 (192.168.10.10) abr\u00ed el MIB Browser (en Desktop):</p> <ol> <li>Fui a Advanced</li> <li>Configur\u00e9:</li> <li>IP: 192.168.40.10 (el router)</li> <li>Puerto: 161 (puerto por defecto de SNMP)</li> <li>Read Community: read</li> <li> <p>Write Community: write</p> </li> <li> <p>En SNMP MIBs \u2192 system \u2192 sysName</p> </li> <li>Me sali\u00f3 el OID del router (identificaci\u00f3n \u00fanica)</li> <li>Tambi\u00e9n pude ver el tiempo de encendido (uptime)</li> </ol> <p></p>"},{"location":"pruebas/#que-informacion-puedes-ver-con-snmp","title":"\u00bfQu\u00e9 informaci\u00f3n puedes ver con SNMP?","text":"<p>Con el MIB Browser pude consultar:</p> Informaci\u00f3n OID Descripci\u00f3n sysName 1.3.6.1.2.1.1.5.0 Nombre del router sysUpTime 1.3.6.1.2.1.1.3.0 Tiempo encendido sysContact 1.3.6.1.2.1.1.4.0 Contacto (Nerea Fernandez) sysLocation 1.3.6.1.2.1.1.6.0 Ubicaci\u00f3n (Sala Servidores) <p>Para qu\u00e9 sirve SNMP</p> <p>En una red real, podr\u00edas usar un software de monitorizaci\u00f3n (como Zabbix o PRTG) que consulta SNMP autom\u00e1ticamente y te avisa si algo va mal (por ejemplo, si el router se apaga).</p>"},{"location":"pruebas/#verificacion-de-spanning-tree","title":"Verificaci\u00f3n de Spanning Tree","text":"<p>Para comprobar que STP est\u00e1 funcionando:</p> <pre><code>SwitchCapa3# show spanning-tree brief\n\nVLAN0010\n  Spanning tree enabled protocol ieee\n  Root ID    Priority    24576\n             This bridge is the root\n\nVLAN0020\n  Spanning tree enabled protocol ieee\n  Root ID    Priority    24576\n             This bridge is the root\n\n...\n</code></pre> <p>Como dice \"This bridge is the root\", significa que el switch es la ra\u00edz de todas las VLANs, tal como se configur\u00f3.</p>"},{"location":"pruebas/#verificacion-de-port-security","title":"Verificaci\u00f3n de Port-Security","text":"<p>Para ver si port-security est\u00e1 activo:</p> <pre><code>SwitchCapa3# show port-security\n\nSecure Port  MaxSecureAddr  CurrentAddr  SecurityViolation  Security Action\n-----------------------------------------------------------------------------\nFa0/1        1              1            0                  Shutdown\n...\n</code></pre> <p>Esto me dice:</p> <ul> <li>Puerto Fa0/1 est\u00e1 asegurado</li> <li>M\u00e1ximo 1 dispositivo permitido</li> <li>Actualmente hay 1 conectado</li> <li>No ha habido violaciones de seguridad</li> </ul>"},{"location":"pruebas/#comandos-utiles-para-verificacion","title":"Comandos \u00datiles para Verificaci\u00f3n","text":"<p>Estos son los comandos que m\u00e1s us\u00e9 para comprobar que todo estaba bien:</p> <pre><code>! Ver las VLANs y sus puertos\nshow vlan brief\n\n! Ver las IPs de las interfaces VLAN\nshow ip interface brief\n\n! Ver la tabla de rutas\nshow ip route\n\n! Ver las ACLs configuradas\nshow access-lists\n\n! Ver tabla MAC  show mac address-table\n\n! Ver estado de STP\nshow spanning-tree\n\n! Ver port-security\nshow port-security interface fa0/1\n</code></pre> <p>Todas las pruebas pasadas</p> <p>Despu\u00e9s de todas estas pruebas, puedo confirmar que:</p> <ul> <li>La red funciona correctamente</li> <li>Las VLANs est\u00e1n bien configuradas</li> <li>El enrutamiento Inter-VLAN funciona</li> <li>Las ACLs bloquean lo que tienen que bloquear</li> <li>SNMP est\u00e1 operativo</li> <li>STP est\u00e1 activo</li> <li>Port-security est\u00e1 configurada</li> </ul> <p>Siguiente: Conclusiones \u2192</p>"},{"location":"seguridad/","title":"Seguridad de la Red","text":"<p>Una vez que toda la red este montada y funcionando, el siguiente paso ser\u00e1 a\u00f1adir seguridad. Aqu\u00ed explico las medidas de seguridad que implement\u00e9.</p>"},{"location":"seguridad/#por-que-necesitamos-seguridad","title":"\u00bfPor qu\u00e9 necesitamos seguridad?","text":"<p>Aunque la red ya funcionaba, hab\u00eda un problema: cualquier dispositivo pod\u00eda acceder a cualquier otro. Por ejemplo, un port\u00e1til conectado al WiFi (que podr\u00eda ser de un invitado) podr\u00eda acceder a los ordenadores de la empresa o a las impresoras.</p> <p>Esto no es seguro, as\u00ed que ten\u00eda que restringir algunos accesos.</p>"},{"location":"seguridad/#listas-de-control-de-acceso-acls","title":"Listas de Control de Acceso (ACLs)","text":"<p>Las ACLs son como filtros que permiten o bloquean tr\u00e1fico de red seg\u00fan reglas que t\u00fa defines. Muy \u00fatil para la seguridad.</p>"},{"location":"seguridad/#mi-objetivo-con-las-acls","title":"Mi objetivo con las ACLs","text":"<p>Objetivo a conseguir:</p> <ul> <li>\u274c Bloquear que los port\u00e1tiles WiFi (VLAN 30) accedan a los PCs (VLAN 10)</li> <li>\u274c Bloquear que los port\u00e1tiles WiFi (VLAN 30) accedan a las impresoras (VLAN 20)</li> <li>\u2705 Permitir que todo el mundo pueda ver el router (VLAN 40)</li> <li>\u2705 Permitir que los PCs e impresoras se comuniquen entre ellos</li> </ul> <p>Motivo de seguridad</p> <p>Como el WiFi podr\u00eda usarlo gente de fuera (invitados, visitas), no deber\u00edan tener acceso a recursos internos de la empresa como los ordenadores o impresoras.</p>"},{"location":"seguridad/#configuracion-de-las-acls","title":"Configuraci\u00f3n de las ACLs","text":"<p>Para ello,se cre\u00f3 una ACL extendida (que permite filtrar con m\u00e1s detalle):</p> <pre><code>SwitchCapa3&gt; enable\nSwitchCapa3# configure terminal\n\n! Crear la ACL n\u00famero 100\n! Bloquear VLAN 30 hacia VLAN 10\nSwitchCapa3(config)# access-list 100 deny ip 192.168.30.0 0.0.0.255 192.168.10.0 0.0.0.255\n\n! Bloquear VLAN 30 hacia VLAN 20\nSwitchCapa3(config)# access-list 100 deny ip 192.168.30.0 0.0.0.255 192.168.20.0 0.0.0.255\n\n! Permitir todo lo dem\u00e1s\nSwitchCapa3(config)# access-list 100 permit ip any any\n\n! Aplicar la ACL a la interfaz de VLAN 30 (entrada)\nSwitchCapa3(config)# interface vlan 30\nSwitchCapa3(config-if)# ip access-group 100 in\nSwitchCapa3(config-if)# exit\n\nSwitchCapa3(config)# exit\nSwitchCapa3# write memory\n</code></pre> <p>Explicaci\u00f3n de los comandos</p> <ul> <li><code>access-list 100 deny ip...</code> \u2192 Bloquea el tr\u00e1fico</li> <li><code>192.168.30.0 0.0.0.255</code> \u2192 Cualquier IP de la red WiFi</li> <li><code>192.168.10.0 0.0.0.255</code> \u2192 Cualquier IP de la red de PCs</li> <li><code>permit ip any any</code> \u2192 Permite todo lo dem\u00e1s (importante ponerlo)</li> <li><code>ip access-group 100 in</code> \u2192 Aplica la ACL en la entrada de VLAN 30</li> </ul>"},{"location":"seguridad/#como-funcionan-las-acls","title":"\u00bfC\u00f3mo funcionan las ACLs?","text":"<p>Las ACLs se leen de arriba hacia abajo. Cuando un paquete llega:</p> <ol> <li>Se comprueba la primera regla</li> <li>Si coincide \u2192 se aplica (deny o permit) y se para</li> <li> <p>Si no coincide \u2192 pasa a la siguiente regla</p> </li> <li> <p>Se comprueba la segunda regla</p> </li> <li> <p>Y as\u00ed sucesivamente...</p> </li> <li> <p>Si no coincide con ninguna \u2192 se bloquea por defecto</p> </li> </ol> <p>Por eso es importante poner <code>permit ip any any</code> al final, para permitir todo lo que no hemos bloqueado espec\u00edficamente.</p> <pre><code>graph TB\n    A[Paquete desde VLAN 30] --&gt; B{\u00bfVa hacia VLAN 10?}\n    B --&gt;|S\u00cd| C[ DENY - Bloqueado]\n    B --&gt;|NO| D{\u00bfVa hacia VLAN 20?}\n    D --&gt;|S\u00cd| E[ DENY - Bloqueado]\n    D --&gt;|NO| F[ PERMIT - Permitido]\n\n    style C fill:#e74c3c,color:#fff\n    style E fill:#e74c3c,color:#fff\n    style F fill:#27ae60,color:#fff</code></pre> <p>Representaci\u00f3n visual del bloqueo:</p> <p></p>"},{"location":"seguridad/#seguridad-de-puertos","title":"Seguridad de Puertos","text":"<p>Adem\u00e1s de las ACLs, tambi\u00e9n se configur\u00f3 port-security en algunos puertos del switch. Esto limita cu\u00e1ntos dispositivos pueden conectarse a cada puerto.</p> <p>Por ejemplo, si se configura un puerto para que solo acepte 1 dispositivo, si alguien intenta conectar un segundo, el puerto se bloquea autom\u00e1ticamente.</p>"},{"location":"seguridad/#configuracion-de-port-security","title":"Configuraci\u00f3n de Port-Security","text":"<pre><code>! Ejemplo con el puerto Fa0/1 (PC0)\nSwitchCapa3(config)# interface fastEthernet 0/1\nSwitchCapa3(config-if)# switchport port-security\nSwitchCapa3(config-if)# switchport port-security maximum 1\nSwitchCapa3(config-if)# switchport port-security violation shutdown\nSwitchCapa3(config-if)# exit\n</code></pre>"},{"location":"seguridad/#verificar-port-security","title":"Verificar Port-Security","text":"<p>Para comprobar que funciona:</p> <pre><code>SwitchCapa3# show port-security interface fastEthernet 0/1\n</code></pre> <p>Esto me muestra:</p> <ul> <li>N\u00famero m\u00e1ximo de MACs permitidas</li> <li>MACs actuales conectadas</li> <li>Si ha habido violaciones de seguridad</li> </ul> <p>Para qu\u00e9 sirve</p> <p>Port-security evita que alguien desconecte un PC leg\u00edtimo y conecte su propio ordenador sin permiso.</p>"},{"location":"seguridad/#tabla-mac-del-switch","title":"Tabla MAC del Switch","text":"<p>Para ver qu\u00e9 dispositivos est\u00e1n conectados al switch, us\u00e9 el comando:</p> <pre><code>SwitchCapa3# show mac address-table\n</code></pre> <p>Esto muestra una tabla con:</p> <ul> <li>Direcci\u00f3n MAC de cada dispositivo</li> <li>VLAN a la que pertenece</li> <li>Puerto del switch donde est\u00e1 conectado</li> </ul> <p>Es muy \u00fatil para detectar dispositivos no autorizados.</p>"},{"location":"seguridad/#spanning-tree-protocol-stp","title":"Spanning Tree Protocol (STP)","text":"<p>Aunque esta red no tenga bucles (todo es en estrella), configur\u00e9 STP por si acaso en el futuro se a\u00f1aden m\u00e1s switches.</p> <p>STP evita que se formen bucles infinitos de tr\u00e1fico que pueden saturar la red.</p>"},{"location":"seguridad/#configuracion-de-stp","title":"Configuraci\u00f3n de STP","text":"<p>Le daremos prioridad baja al switch para que sea el \"root bridge\" (ra\u00edz) de todas las VLANs:</p> <pre><code>SwitchCapa3(config)# spanning-tree vlan 10 priority 24576\nSwitchCapa3(config)# spanning-tree vlan 20 priority 24576\nSwitchCapa3(config)# spanning-tree vlan 30 priority 24576\nSwitchCapa3(config)# spanning-tree vlan 40 priority 24576\n</code></pre> <p>Explicaci\u00f3n</p> <ul> <li>Por defecto la prioridad es 32768</li> <li>Poni\u00e9ndola a 24576 (m\u00e1s baja), me aseguro de que este switch sea la ra\u00edz</li> <li>Esto optimiza el flujo de tr\u00e1fico en la red</li> </ul>"},{"location":"seguridad/#verificar-stp","title":"Verificar STP","text":"<pre><code>SwitchCapa3# show spanning-tree\n</code></pre> <p>Me muestra que el switch es el \"root bridge\" de todas las VLANs.</p>"},{"location":"seguridad/#resumen-de-seguridad-implementada","title":"Resumen de Seguridad Implementada","text":"Medida de Seguridad \u00bfPara qu\u00e9 sirve? Estado ACL 100 Bloquear WiFi \u2192 PCs/Impresoras \u2705 Configurada Port Security Limitar dispositivos por puerto \u2705 Configurada STP Evitar bucles de red \u2705 Configurada Contrase\u00f1a WiFi Proteger acceso inal\u00e1mbrico (WPA2-PSK) \u2705 Configurada"},{"location":"seguridad/#problemas-que-pueden-surgir","title":"Problemas que pueden surgir","text":"<p>Al configurar las ACLs, es importante utilizar <code>permit ip any any</code> al final, ya que si no se da el caso, todo se bloquear\u00e1, incluso el tr\u00e1fico que deber\u00eda permitirse. </p> <p>Hay que tenerlo en cuenta, pero si se da el caso que no se hizo, con a\u00f1ad\u00edr esa l\u00ednea, todo empezar\u00e1 a funcionar bien.</p> <p>Tambi\u00e9n se prob\u00f3 a poner la ACL en direcci\u00f3n \"out\" en vez de \"in\", y no funcionaba. Tiene que ser \"in\" en la interfaz VLAN 30 para que filtre el tr\u00e1fico que sale de esa VLAN.</p> <p>Seguridad completada</p> <p>Con estas medidas, se consigui\u00f3 una red mucho m\u00e1s segura. Lo siguiente ser\u00e1 hacer pruebas para comprobar que todo funciona como debe.</p> <p>Siguiente: Pruebas y Monitorizaci\u00f3n \u2192</p>"}]}